(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["PayDetail"],{cbef:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"total"},[t._m(0),a("div",{staticClass:"payment-detail"},[t._m(1),a("div",{staticClass:"payment"},[a("span",{staticClass:"large-text"},[t._v(t._s(t.allPayment-(t.specialDiscount+t.campaignDiscount)))]),t._v("円 ")])]),a("div",{staticClass:"dead-line"},[a("p",[t._v("支払期日："+t._s(t.year)+"年"+t._s(t.month)+"月末日")])])]),a("div",{staticClass:"detail"},[t._m(2),a("div",{staticClass:"break-down"},[a("div",[a("div",[t._v("小計")]),a("div",[t._v(t._s(t.allPayment)),a("span",{staticClass:"small-text"},[t._v("円")])])]),a("ul",[a("li",[a("div",{staticClass:"title"},[t._v("広告料")]),a("div",{staticClass:"value"},[t._v(t._s(t.payment)),a("span",{staticClass:"small-text"},[t._v("円")])])]),a("li",[a("div",{staticClass:"title"},[t._v("手数料")]),a("div",{staticClass:"value"},[t._v(t._s(t.fee)),a("span",{staticClass:"small-text"},[t._v("円")])])]),a("li",[a("div",{staticClass:"title"},[t._v("消費税")]),a("div",{staticClass:"value"},[t._v(t._s(t.tax)),a("span",{staticClass:"small-text"},[t._v("円")])])])]),a("div",[a("div",[t._v("小計")]),a("div",[t._v(t._s(t.specialDiscount+t.campaignDiscount)),a("span",{staticClass:"small-text"},[t._v("円")])])]),a("ul",[a("li",[a("div",{staticClass:"title"},[t._v("特別割引額")]),a("div",{staticClass:"value"},[t._v(t._s(t.specialDiscount)),a("span",{staticClass:"small-text"},[t._v("円")])])]),a("li",[a("div",{staticClass:"title"},[t._v("キャンペーン割引額")]),a("div",{staticClass:"value"},[t._v(t._s(t.campaignDiscount)),a("span",{staticClass:"small-text"},[t._v("円")])])])])])])])},r=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tax"},[a("p",[t._v("（消費税・手数料込）")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"text"},[a("p",[t._v("請求合計")]),a("p",[t._v("確定")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"detail-title"},[a("p",[t._v("請求内訳")])])}],s=(a("4160"),a("a9e3"),a("159b"),a("96cf"),a("1da1")),i=a("4ee7"),c={data:function(){return{allApplys:[],allPayment:0,payment:0,tax:0,fee:0,specialDiscount:0,campaignDiscount:0,clientData:"",campaignData:""}},props:["year","month"],created:function(){var t=this,e=i["a"].auth().currentUser.uid,a=i["a"].firestore().collection("account"),n=i["a"].firestore().collection("campaigns"),r=function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=[],t.next=3,n.where("uid","==",e).get();case 3:return r=t.sent,r.forEach((function(t){a.push(t.id)})),t.abrupt("return",a);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),c=function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(a){var r,s,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r=[],s=0;case 2:if(!(s<a.length)){e.next=10;break}return e.next=5,n.doc(a[s]).collection("applys").where("complete","==",!0).get();case 5:i=e.sent,i.forEach((function(t){r.push(t.data())}));case 7:s++,e.next=2;break;case 10:t.allApplys=r;case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l=function(){t.allApplys.forEach((function(e){var a=e.completeTime.toDate(),n=a.getFullYear(),r=a.getMonth()+1;Number(t.year)===n&&t.month-1===r&&(t.payment+=Number(e.price))}))},u=function(){t.tax=.1*t.payment,t.fee=.3*t.payment,t.allPayment=t.payment+(t.tax+t.fee)},o=function(){var n=Object(s["a"])(regeneratorRuntime.mark((function n(){var r,s,i,c,l,u,o,p,m,v,d,h,f;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,a.where("userId","==",e).get();case 2:if(r=n.sent,s=r.docs[0].data(),i=s.specialEditDate.toDate(),c=String(i.getFullYear()),l=String(i.getMonth()+1),u="0",o="",1===l.length&&(o=Number(c+u+l)),2===l.length&&(o=Number(c+l)),p=new Date,m=String(p.getFullYear()),v=String(p.getMonth()+1),d="0",h="",1===l.length&&(h=Number(m+d+v)),2===l.length&&(h=Number(m+v)),!(o<=h)){n.next=21;break}return"未選択"!==s.specialPercent&&(f=Number(s.specialPercent.substr(0,2)),t.specialDiscount=t.payment*(f/100)),n.abrupt("return",s);case 21:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),p=function(e){var a=e.campaignEditDate.toDate(),n=String(a.getFullYear()),r=String(a.getMonth()+1),s="0",i="";1===r.length&&(i=Number(n+s+r)),2===r.length&&(i=Number(n+r));var c=new Date,l=String(c.getFullYear()),u=String(c.getMonth()+1),o="0",p="";if(1===r.length&&(p=Number(l+o+u)),2===r.length&&(p=Number(l+u)),i<=p&&"未選択"!==e.campaignPercent){var m=Number(e.campaignPercent.substr(0,2));t.campaignDiscount=t.payment*(m/100),console.log()}},m=function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,r();case 2:return e=t.sent,t.next=5,c(e);case 5:return t.next=7,l();case 7:return u(),t.next=10,o();case 10:a=t.sent,p(a);case 12:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();m()},methods:{reloadFunctions:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,e.reloadGetPayment(t);case 2:return a.next=4,e.reloadAllPayment();case 4:return a.next=6,e.reloadSpecialAmount();case 6:return n=a.sent,a.next=9,e.reloadCampaignAmount(n);case 9:case"end":return a.stop()}}),a)})))()},reloadGetPayment:function(t){var e=this;this.payment=0,this.allApplys.forEach((function(a){var n=a.completeTime.toDate(),r=n.getFullYear(),s=n.getMonth()+1;Number(e.year)===r&&t-1===s&&(e.payment+=Number(a.price))}))},reloadAllPayment:function(){this.tax=.1*this.payment,this.fee=.3*this.payment,this.allPayment=this.payment+(this.tax+this.fee)},reloadSpecialAmount:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var a,n,r,s,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=i["a"].auth().currentUser.uid,n=i["a"].firestore().collection("account"),e.next=4,n.where("userId","==",a).get();case 4:return r=e.sent,s=r.docs[0].data(),"未選択"!==s.specialPercent&&(c=Number(s.specialPercent.substr(0,2)),t.specialDiscount=t.payment*(c/100)),e.abrupt("return",s);case 8:case"end":return e.stop()}}),e)})))()},reloadCampaignAmount:function(t){if("未選択"!==t.campaignPercent){var e=Number(t.campaignPercent.substr(0,2));this.campaignDiscount=this.payment*(e/100)}}}},l=c,u=a("2877"),o=Object(u["a"])(l,n,r,!1,null,null,null);e["default"]=o.exports}}]);
//# sourceMappingURL=PayDetail.86c66274.js.map