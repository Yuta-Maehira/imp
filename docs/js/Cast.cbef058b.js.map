{"version":3,"sources":["webpack:///./src/views/Cast.vue?30da","webpack:///src/views/Cast.vue","webpack:///./src/views/Cast.vue?f1d7","webpack:///./src/views/Cast.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","attrs","logs","_l","paginated","log","index","key","accountId","imgurl","_s","name","nameLimit","class","active","isInstagramActive","isTwitterActive","isYouTubeActive","isTikTokActive","category","roll","email","tell","_e","staticRenderFns","components","Header","SideBar","data","localStorage","paginate","created","castImgArray","sort","allFunction","methods","text","substr","maxLength","component"],"mappings":"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","file":"js/Cast.cbef058b.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('Header'),_c('div',{staticClass:\"container\"},[_c('SideBar'),_c('main',[_c('section',{staticClass:\"cast-section\"},[_c('h2',[_vm._v(\"キャスト一覧\")]),_c('paginate',{staticClass:\"paginate\",attrs:{\"name\":\"paginate-log\",\"list\":_vm.logs,\"per\":10,\"tag\":\"div\"}},_vm._l((_vm.paginated('paginate-log')),function(log,index){return _c('article',{key:index,staticClass:\"cast-box\"},[_c('router-link',{staticClass:\"cast-link-box\",attrs:{\"to\":'/cast/detail/' + log.accountId + '/1',\"tag\":\"div\"}},[_c('div',{staticClass:\"img-box\"},[(log.imgurl)?_c('img',{attrs:{\"src\":log.imgurl,\"alt\":\"キャストの画像\"}}):_c('img',{attrs:{\"src\":require(\"../assets/image/no_image.png\"),\"alt\":\"キャストの画像\"}})]),_c('div',{staticClass:\"cast-info\"},[_c('h3',{staticClass:\"cast-name\"},[_vm._v(_vm._s(log.name ? _vm.nameLimit(log.name) : _vm.nameLimit('未設定')))]),_c('div',{staticClass:\"sns-icon\"},[_c('span',{class:{ active: _vm.isInstagramActive }},[_c('i',{staticClass:\"fab fa-instagram\"})]),_c('span',{class:{ active: _vm.isTwitterActive }},[_c('i',{staticClass:\"fab fa-twitter active\"})]),_c('span',{class:{ active: _vm.isYouTubeActive }},[_c('i',{staticClass:\"fab fa-youtube\"})]),_c('span',{class:{ active: _vm.isTikTokActive }},[_c('i',{staticClass:\"fab fa-tiktok\"})])]),_c('div',{staticClass:\"category\"},_vm._l((log.category),function(category,index){return _c('p',{key:index,staticClass:\"cast-category\"},[_vm._v(_vm._s(category ? category : '未設定'))])}),0),(_vm.roll === 'admin')?_c('div',{staticClass:\"inquiry\"},[_c('p',{staticClass:\"email\"},[_vm._v(_vm._s(log.email ? log.email : '未設定'))]),_c('p',{staticClass:\"tell\"},[_vm._v(_vm._s(log.tell ? log.tell : '未設定'))])]):_vm._e()])])],1)}),0)],1),_c('paginate-links',{attrs:{\"for\":\"paginate-log\",\"limit\":3,\"classes\":{\n          'ul': 'pagination',\n          'li': 'pagination-list',\n          'li > a': 'pagination-link'\n        },\"show-step-links\":true}})],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <Header/>\n    <div class=\"container\">\n      <SideBar/>\n      <main>\n        <section class=\"cast-section\">\n          <h2>キャスト一覧</h2>\n\n          <paginate class=\"paginate\" name=\"paginate-log\" :list=\"logs\" :per=\"10\" tag=\"div\">\n            <article class=\"cast-box\" v-for=\"(log, index) in paginated('paginate-log')\" :key=\"index\">\n              <router-link :to=\"'/cast/detail/' + log.accountId + '/1'\" tag=\"div\" class=\"cast-link-box\">\n                <div class=\"img-box\">\n                  <img v-if=\"log.imgurl\" :src=\"log.imgurl\" alt=\"キャストの画像\">\n                  <img v-else src=\"../assets/image/no_image.png\" alt=\"キャストの画像\">\n                </div>\n                <div class=\"cast-info\">\n                  <h3 class=\"cast-name\">{{ log.name ? nameLimit(log.name) : nameLimit('未設定') }}</h3>\n                  <div class=\"sns-icon\">\n                    <span :class=\"{ active: isInstagramActive }\"><i class=\"fab fa-instagram\"></i></span>\n                    <span :class=\"{ active: isTwitterActive }\"><i class=\"fab fa-twitter active\"></i></span>\n                    <span :class=\"{ active: isYouTubeActive }\"><i class=\"fab fa-youtube\"></i></span>\n                    <span :class=\"{ active: isTikTokActive }\"><i class=\"fab fa-tiktok\"></i></span>\n                  </div>\n                  <div class=\"category\">\n                    <p class=\"cast-category\" v-for=\"(category, index) in log.category\" :key=\"index\">{{ category ? category : '未設定' }}</p>\n                  </div>\n                  <div v-if=\"roll === 'admin'\" class=\"inquiry\">\n                    <p class=\"email\">{{ log.email ? log.email : '未設定' }}</p>\n                    <p class=\"tell\">{{ log.tell ? log.tell : '未設定' }}</p>\n                  </div>\n                </div>\n              </router-link>\n            </article>\n          </paginate>\n        </section>\n        <paginate-links \n          for=\"paginate-log\" \n          :limit=\"3\"\n          :classes=\"{\n            'ul': 'pagination',\n            'li': 'pagination-list',\n            'li > a': 'pagination-link'\n          }\" \n          :show-step-links=\"true\"\n        ></paginate-links>\n      </main>\n    </div>\n  </div>\n</template>\n\n<script>\nimport Header from '../components/Header.vue';\nimport SideBar from '../components/SideBar.vue';\nimport firebase from '@/plugins/firebase'\n\nexport default {\n  components: {\n    Header,\n    SideBar\n  },\n  data() {\n    return {\n      roll: localStorage.roll,\n      logs: [],\n      paginate: ['paginate-log'],\n      isInstagramActive: false,\n      isTwitterActive: false,\n      isYouTubeActive: false,\n      isTikTokActive: false,\n    }\n  },\n  created() {\n    const accountDb = firebase.firestore().collection('account');\n    \n    // (2) 全てのキャストを取得して、データのみ配列に格納する処理\n    const getCasts = async () => {\n      const castsDataArray = [];\n      const casts = await accountDb.where('roll', '==', 'cast').get();\n      casts.forEach(cast => {\n        castsDataArray.push(cast.data());\n      })\n      return castsDataArray;\n    }\n\n    // (3) imgpathがあればimgurlを取得し、なければそのまま格納する処理\n    const pushLogs = async (castsDataArray) => {\n      const castImgArray = [];\n      for(let i = 0; i < castsDataArray.length; i++) {\n        snsActiveCheck(castsDataArray[i])\n        if(castsDataArray[i].imgpath !== '') {\n          const imgpath = castsDataArray[i].imgpath;\n          const imgurl = await firebase.storage().ref().child(imgpath).getDownloadURL();\n          castsDataArray[i].imgurl = imgurl;\n          castImgArray.push(castsDataArray[i]);\n        } else {\n          castImgArray.push(castsDataArray[i]);\n        }\n      }\n      return castImgArray;\n    }\n\n    // (4) logsのデータを降順にソートする処理\n    const castSort = (castImgArray) => {\n      castImgArray.sort((to, from) => {\n        if(to.createData > from.createData) return -1;\n        if(to.createData < from.createData) return 1;\n        return 0;\n      })\n      this.logs = castImgArray;\n    }\n\n    // キャストのsns活動チェック\n    const snsActiveCheck = (data) => {\n      if(\n          data.myInstagram.accountId !== \"\" || data.myInstagram.accountName !== \"\" ||\n          data.myInstagram.accountType !== \"\" || data.myInstagram.followerCount !== \"\" ||\n          data.myInstagram.goodAverage !== \"\" || data.myInstagram.engagement !== \"\"\n        ) this.isInstagramActive = true;\n\n        if(\n          data.myTwitter.accountId !== \"\" || data.myTwitter.accountName !== \"\" ||\n          data.myTwitter.accountType !== \"\" || data.myTwitter.followerCount !== \"\" ||\n          data.myTwitter.goodAverage !== \"\" || data.myTwitter.engagement !== \"\"\n        ) this.isTwitterActive = true;\n\n        if(\n          data.myYouTube.accountId !== \"\" || data.myYouTube.accountName !== \"\" ||\n          data.myYouTube.accountType !== \"\" || data.myYouTube.followerCount !== \"\" ||\n          data.myYouTube.goodAverage !== \"\" || data.myYouTube.engagement !== \"\"\n        ) this.isYouTubeActive = true;\n\n        if(\n          data.myTikTok.accountId !== \"\" || data.myTikTok.accountName !== \"\" ||\n          data.myTikTok.accountType !== \"\" || data.myTikTok.followerCount !== \"\" ||\n          data.myTikTok.goodAverage !== \"\" || data.myTikTok.engagement !== \"\"\n        ) this.isTikTokActive = true;\n    }\n\n\n\n    // (1) 全ての関数を実行\n    const allFunction = async () => {\n      const castsDataArray = await getCasts()\n      const castImgArray = await pushLogs(castsDataArray)\n      await castSort(castImgArray)\n    }\n\n\n    allFunction()\n    \n  },\n  methods: {\n    nameLimit(text) {\n      const maxLength = 8;\n      if(text.length > maxLength) {\n        return text.substr(0, maxLength) + '...';\n      }\n      return text;\n    }\n  }\n}\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Cast.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Cast.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Cast.vue?vue&type=template&id=8eed7200&\"\nimport script from \"./Cast.vue?vue&type=script&lang=js&\"\nexport * from \"./Cast.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}