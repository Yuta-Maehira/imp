{"version":3,"sources":["webpack:///./src/views/Notification.vue?4077","webpack:///src/views/Notification.vue","webpack:///./src/views/Notification.vue?0299","webpack:///./src/views/Notification.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","roll","attrs","_e","logs","_l","paginated","log","index","key","class","status","notificationId","_s","titleLimit","title","descreptionLimit","description","destination","staticRenderFns","components","Header","SideBar","data","localStorage","paginate","notificationChecked","created","console","allFunction","methods","text","substr","maxLength","component"],"mappings":"uHAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACA,EAAG,UAAUA,EAAG,MAAM,CAACE,YAAY,aAAa,CAACF,EAAG,WAAWA,EAAG,OAAO,CAACA,EAAG,UAAU,CAACE,YAAY,wBAAwB,CAACF,EAAG,KAAK,CAACJ,EAAIO,GAAG,UAAwB,UAAbP,EAAIQ,KAAkBJ,EAAG,cAAc,CAACE,YAAY,MAAMG,MAAM,CAAC,GAAK,uBAAuB,IAAM,QAAQ,CAACT,EAAIO,GAAG,YAAYP,EAAIU,KAAKN,EAAG,MAAM,CAACE,YAAY,gBAAgB,CAACF,EAAG,WAAW,CAACE,YAAY,WAAWG,MAAM,CAAC,KAAO,eAAe,KAAOT,EAAIW,KAAK,IAAM,GAAG,IAAM,QAAQX,EAAIY,GAAIZ,EAAIa,UAAU,iBAAiB,SAASC,EAAIC,GAAO,OAAOX,EAAG,UAAU,CAACY,IAAID,EAAME,MAAM,CAAC,mBAAoBH,EAAII,SAAS,CAACd,EAAG,cAAc,CAACE,YAAY,wBAAwBG,MAAM,CAAC,GAAK,wBAA0BK,EAAIK,eAAe,IAAM,QAAQ,CAACf,EAAG,MAAM,CAACE,YAAY,qBAAqB,CAACF,EAAG,MAAM,CAACA,EAAG,IAAI,CAACE,YAAY,sBAAsB,CAACN,EAAIO,GAAGP,EAAIoB,GAAGpB,EAAIqB,WAAWP,EAAIQ,aAAalB,EAAG,MAAM,CAACA,EAAG,IAAI,CAACE,YAAY,4BAA4B,CAACN,EAAIO,GAAGP,EAAIoB,GAAGpB,EAAIuB,iBAAiBT,EAAIU,mBAAmBpB,EAAG,MAAM,CAACE,YAAY,4BAA4B,CAACF,EAAG,IAAI,CAACJ,EAAIO,GAAGP,EAAIoB,GAAGN,EAAIW,YAAcX,EAAIW,YAAc,iBAAiB,MAAK,IAAI,GAAGrB,EAAG,iBAAiB,CAACK,MAAM,CAAC,IAAM,eAAe,MAAQ,EAAE,QAAU,CACnuC,GAAM,aACN,GAAM,kBACN,SAAU,mBACV,mBAAkB,MAAS,MAAM,IAAI,IAC7CiB,EAAkB,G,gFC4CtB,GACEC,WAAY,CACVC,OAAJ,OACIC,QAAJ,QAEEC,KALF,WAMI,MAAO,CACLtB,KAAMuB,aAAavB,KACnBG,KAAM,GACNqB,SAAU,CAAC,gBACXC,qBAAqB,IAGzBC,QAbF,WAaA,WACIC,QAAQrB,IAAI,MACZ,IAAJ,gCACA,2CACA,iDAGA,iLACA,+BADA,cACA,EADA,OAEA,8BAFA,kBAGA,GAHA,gGAOA,wKACA,KADA,SAEA,QAFA,cAEA,EAFA,OAGA,uBACA,oBAJA,kBAMA,GANA,gGAUA,sKACA,uBACA,OACA,gBACA,kBAEA,kDAEA,+CAHA,eALA,mGAeA,iLACA,IADA,cACA,EADA,gBAEA,IAFA,cAEA,EAFA,gBAGA,OAHA,gGAMIsB,KAGFC,QAAS,CAEPhB,WAFJ,SAEA,GACM,IAAN,KACM,OAAN,WACeiB,EAAKC,OAAO,EAAGC,GAAa,MAE9BF,GAGTf,iBAVJ,SAUA,GACM,IAAN,KACM,OAAN,WACee,EAAKC,OAAO,EAAGC,GAAa,MAE9BF,KC7HyU,I,YCOlVG,EAAY,eACd,EACA1C,EACA2B,GACA,EACA,KACA,KACA,MAIa,aAAAe,E","file":"js/Notification.ee5dcd18.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('Header'),_c('div',{staticClass:\"container\"},[_c('SideBar'),_c('main',[_c('section',{staticClass:\"notification-section\"},[_c('h2',[_vm._v(\"通知一覧\")]),(_vm.roll === 'admin')?_c('router-link',{staticClass:\"btn\",attrs:{\"to\":\"/notification/create\",\"tag\":\"div\"}},[_vm._v(\"新規通知作成\")]):_vm._e(),_c('div',{staticClass:\"notification\"},[_c('paginate',{staticClass:\"paginate\",attrs:{\"name\":\"paginate-log\",\"list\":_vm.logs,\"per\":10,\"tag\":\"div\"}},_vm._l((_vm.paginated('paginate-log')),function(log,index){return _c('article',{key:index,class:['notification-box', log.status]},[_c('router-link',{staticClass:\"notification-link-box\",attrs:{\"to\":'/notification/detail/' + log.notificationId,\"tag\":\"div\"}},[_c('div',{staticClass:\"notification-info\"},[_c('div',[_c('p',{staticClass:\"notification-title\"},[_vm._v(_vm._s(_vm.titleLimit(log.title)))])]),_c('div',[_c('p',{staticClass:\"notification-description\"},[_vm._v(_vm._s(_vm.descreptionLimit(log.description)))])]),_c('div',{staticClass:\"notification-destination\"},[_c('p',[_vm._v(_vm._s(log.destination ? log.destination : '未設定'))])])])])],1)}),0)],1),_c('paginate-links',{attrs:{\"for\":\"paginate-log\",\"limit\":3,\"classes\":{\n            'ul': 'pagination',\n            'li': 'pagination-list',\n            'li > a': 'pagination-link'\n          },\"show-step-links\":true}})],1)])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <Header/>\n    <div class=\"container\">\n      <SideBar/>\n      <main>\n        <section class=\"notification-section\">\n          <h2>通知一覧</h2>\n          <router-link v-if=\"roll === 'admin'\" to=\"/notification/create\" tag=\"div\" class=\"btn\">新規通知作成</router-link>\n          <div class=\"notification\">\n            <paginate class=\"paginate\" name=\"paginate-log\" :list=\"logs\" :per=\"10\" tag=\"div\">\n              <article :class=\"['notification-box', log.status]\" v-for=\"(log, index) in paginated('paginate-log')\" :key=\"index\">\n                <router-link :to=\"'/notification/detail/' + log.notificationId\" tag=\"div\" class=\"notification-link-box\">\n                  <div class=\"notification-info\">\n                    <div>\n                      <p class=\"notification-title\">{{ titleLimit(log.title) }}</p>\n                    </div>\n                    <div>\n                      <p class=\"notification-description\">{{ descreptionLimit(log.description) }}</p>\n                    </div>\n                    <div class=\"notification-destination\">\n                      <p>{{ log.destination ? log.destination : '未設定' }}</p>\n                    </div>\n                  </div>\n                </router-link>\n              </article>\n            </paginate>\n          </div>\n          <paginate-links \n            for=\"paginate-log\" \n            :limit=\"3\"\n            :classes=\"{\n              'ul': 'pagination',\n              'li': 'pagination-list',\n              'li > a': 'pagination-link'\n            }\" \n            :show-step-links=\"true\"\n          ></paginate-links>\n        </section>\n      </main>\n    </div>\n  </div>\n</template>\n\n<script>\nimport Header from '../components/Header.vue';\nimport SideBar from '../components/SideBar.vue';\nimport firebase from '@/plugins/firebase'\n\nexport default {\n  components: {\n    Header,\n    SideBar\n  },\n  data() {\n    return {\n      roll: localStorage.roll,\n      logs: [],\n      paginate: ['paginate-log'],\n      notificationChecked: true\n    }\n  },\n  created() {\n    console.log('ok')\n    const uid = firebase.auth().currentUser.uid\n    const accountDb = firebase.firestore().collection('account')\n    const notificationDb = firebase.firestore().collection('notifications')\n\n    // (2) 自分のアカウントデータを取得し、変数に格納する処理\n    const getMyAccountData = async () => {\n      const myAccount = await accountDb.where('userId', '==', uid ).get();\n      const myAccountDate = myAccount.docs[0].data().createData;\n      return myAccountDate;\n    }\n\n    // (3) 通知データを取得し、変数に格納\n    const getNotification = async () => {\n      const notificationDataArray = [];\n      const notifications = await notificationDb.get();\n      notifications.forEach(notification => {\n        notificationDataArray.push(notification.data());\n      })\n      return notificationDataArray;\n    }\n\n    // (3) 通知の作成日時、自分のアカウント作成日時を比較し表示制限\n    const checkDate = async (notificationDataArray, myAccountDate) => {\n      for(let i = 0; i < notificationDataArray.length; i++) {\n        const notificationData = notificationDataArray[i];\n        const notificationCreateDate = notificationData.createDate;\n        if(this.roll === 'admin') {\n          this.logs.push(notificationData);\n        } else if(this.roll === 'client' && notificationData.destination === 'client' && myAccountDate < notificationCreateDate) {\n          this.logs.push(notificationData);\n        } else if(this.roll === 'cast' && notificationData.destination === 'cast' && myAccountDate < notificationCreateDate) {\n          this.logs.push(notificationData);\n        }\n      }\n    }\n\n    // (1) 全ての関数を実行\n    const allFunction = async () => {\n      const myAccountDate = await getMyAccountData()\n      const notificationDataArray = await getNotification()\n      await checkDate(notificationDataArray, myAccountDate)\n    }\n\n    allFunction()\n\n  },\n  methods: {\n    // titleの表示文字数を制限\n    titleLimit(text) {\n      const maxLength = 18;\n      if(text.length > maxLength) {\n        return text.substr(0, maxLength) + '...';\n      }\n      return text;\n    },\n    // descriptionの表示文字数を制限\n    descreptionLimit(text) {\n      const maxLength = 35;\n      if(text.length > maxLength) {\n        return text.substr(0, maxLength) + '...';\n      }\n      return text;\n    },\n  }\n}\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Notification.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Notification.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Notification.vue?vue&type=template&id=d97db160&\"\nimport script from \"./Notification.vue?vue&type=script&lang=js&\"\nexport * from \"./Notification.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}