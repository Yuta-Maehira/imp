{"version":3,"sources":["webpack:///./src/views/Contact.vue?b8d9","webpack:///src/views/Contact.vue","webpack:///./src/views/Contact.vue?5b1c","webpack:///./src/views/Contact.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","attrs","logs","_l","paginated","log","index","key","campaignid","uid","imgurl","_s","titleLimit","title","descreptionLimit","description","class","active","instagram","twitter","youtube","tiktok","price","staticRenderFns","components","Header","SideBar","data","roll","localStorage","paginate","created","campaignImgArray","sort","allFunction","methods","maxLength","text","substr","logsSort","component"],"mappings":"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","file":"js/Contact.7998c06c.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('Header'),_c('div',{staticClass:\"container\"},[_c('SideBar'),_c('main',[_c('section',{staticClass:\"contact-section\"},[_c('h2',[_vm._v(\"コンタクト\")]),_c('paginate',{staticClass:\"paginate\",attrs:{\"name\":\"paginate-log\",\"list\":_vm.logs,\"per\":10}},_vm._l((_vm.paginated('paginate-log')),function(log,index){return _c('article',{key:index,staticClass:\"campaign-box\"},[_c('router-link',{staticClass:\"campaign-link-box\",attrs:{\"to\":'/contact/cast/' + log.campaignid + '?uid=' + log.uid,\"tag\":\"div\"}},[_c('div',{staticClass:\"img-box\"},[(log.imgurl)?_c('img',{attrs:{\"src\":log.imgurl,\"alt\":\"キャンペーンの画像\"}}):_c('img',{attrs:{\"src\":require(\"../assets/image/no_image.png\"),\"alt\":\"キャンペーンの画像\"}})]),_c('div',{staticClass:\"campaign-info\"},[_c('h3',{staticClass:\"campaign-title\"},[_vm._v(_vm._s(_vm.titleLimit(log.title)))]),_c('p',{staticClass:\"campaign-description\"},[_vm._v(_vm._s(_vm.descreptionLimit(log.description)))]),_c('div',{staticClass:\"campaign-under-box\"},[_c('div',{staticClass:\"sns-icon\"},[_c('span',{class:{ active: log.instagram }},[_c('i',{staticClass:\"fab fa-instagram\"})]),_c('span',{class:{ active: log.twitter }},[_c('i',{staticClass:\"fab fa-twitter active\"})]),_c('span',{class:{ active: log.youtube }},[_c('i',{staticClass:\"fab fa-youtube\"})]),_c('span',{class:{ active: log.tiktok }},[_c('i',{staticClass:\"fab fa-tiktok\"})])]),_c('p',{staticClass:\"campaign-price\"},[_vm._v(_vm._s(log.price)),_c('span',[_vm._v(\"円\")])])])])])],1)}),0)],1),_c('paginate-links',{attrs:{\"for\":\"paginate-log\",\"limit\":3,\"classes\":{\n          'ul': 'pagination',\n          'li': 'pagination-list',\n          'li > a': 'pagination-link'\n        },\"show-step-links\":true}})],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <Header/>\n    <div class=\"container\">\n      <SideBar/>\n      <main>\n        <section class=\"contact-section\">\n          <h2>コンタクト</h2>\n          <paginate class=\"paginate\" name=\"paginate-log\" :list=\"logs\" :per=\"10\">\n            <article class=\"campaign-box\" v-for=\"(log, index) in paginated('paginate-log')\" :key=\"index\">\n              <router-link :to=\"'/contact/cast/' + log.campaignid + '?uid=' + log.uid\" tag=\"div\"\n              class=\"campaign-link-box\">\n                <div class=\"img-box\">\n                  <img v-if=\"log.imgurl\" :src=\"log.imgurl\" alt=\"キャンペーンの画像\">\n                  <img v-else src=\"../assets/image/no_image.png\" alt=\"キャンペーンの画像\">\n                </div>\n                <div class=\"campaign-info\">\n                  <h3 class=\"campaign-title\">{{ titleLimit(log.title) }}</h3>\n                  <p class=\"campaign-description\">{{ descreptionLimit(log.description) }}</p>\n                  <div class=\"campaign-under-box\">\n                    <div class=\"sns-icon\">\n                      <span :class=\"{ active: log.instagram }\"><i class=\"fab fa-instagram\"></i></span>\n                      <span :class=\"{ active: log.twitter }\"><i class=\"fab fa-twitter active\"></i></span>\n                      <span :class=\"{ active: log.youtube }\"><i class=\"fab fa-youtube\"></i></span>\n                      <span :class=\"{ active: log.tiktok }\"><i class=\"fab fa-tiktok\"></i></span>\n                    </div>\n                    <p class=\"campaign-price\">{{ log.price }}<span>円</span></p>\n                  </div>\n                </div>\n              </router-link>\n            </article>\n          </paginate>\n        </section>\n        <paginate-links \n          for=\"paginate-log\" \n          :limit=\"3\"\n          :classes=\"{\n            'ul': 'pagination',\n            'li': 'pagination-list',\n            'li > a': 'pagination-link'\n          }\" \n          :show-step-links=\"true\"\n        ></paginate-links>\n      </main>\n    </div>\n  </div>\n</template>\n\n<script>\nimport Header from '../components/Header.vue';\nimport SideBar from '../components/SideBar.vue';\nimport firebase from '@/plugins/firebase'\n\nexport default {\n  components: {\n    Header,\n    SideBar\n  },\n  data() {\n    return {\n      roll: localStorage.roll,\n      logs: [],\n      paginate: ['paginate-log']\n    }\n  },\n  created() {\n    const uid = firebase.auth().currentUser.uid;\n    const campaignDb = firebase.firestore().collection('campaigns');\n\n    const getCampaign = async () => {\n      const docs = [];\n      const campaigns = await campaignDb.where('contact', '==', true).get();\n      campaigns.forEach(campaign => {\n        docs.push(campaign.id);\n      })\n      return docs;\n    }\n\n    const getTransactionCast = async (docs) => {\n      const transactionCastsDataArray = [];\n      for(let i = 0; i < docs.length; i++) {\n        const transactionObject = []\n        const transactionCasts = await campaignDb.doc(docs[i]).collection('applys').where('status', '==', true).get();\n        transactionCasts.forEach(transactionCast => {\n          transactionObject.push(transactionCast.data());\n        })\n        transactionCastsDataArray.push(transactionObject);\n      }\n      return transactionCastsDataArray;\n    }\n\n    const getTransactionCampaignId = async (transactionCastsDataArray) => { // campaign毎の取引キャスト\n      const transactionCampaignsId = [];\n      for(let i = 0; i < transactionCastsDataArray.length; i++) {\n        if(transactionCastsDataArray[i].length !== 0) {\n          const campaignId = transactionCastsDataArray[i][0].campaignId;\n          const castUid = transactionCastsDataArray[i][0].uid;\n          if(this.roll === \"admin\") {\n            transactionCampaignsId.push(campaignId);\n          } else if(this.roll === \"client\") {\n            const campaign = await campaignDb.where('campaignid', '==', campaignId).get();\n            const data = campaign.docs[0].data()\n            const myUid = data.uid;\n            if(myUid === uid) transactionCampaignsId.push(data.campaignid);\n          } else if(this.roll === \"cast\") {\n            if(castUid === uid) transactionCampaignsId.push(campaignId);\n          }\n        }\n      }\n      return transactionCampaignsId;\n    }\n\n    const getTransactionCampaignData = async (transactionCampaignsId) => {\n      const transactionCampaignsData = [];\n      for(let i = 0; i < transactionCampaignsId.length; i++) {\n        const campaign = await campaignDb.where('campaignid', '==', transactionCampaignsId[i]).get()\n        transactionCampaignsData.push(campaign.docs[0].data())\n      }\n      return transactionCampaignsData;\n    }\n\n    const dataPush = async (transactionCampaignsData) => {\n      const campaignImgArray = [];\n      for(let i = 0; i < transactionCampaignsData.length; i++) {\n        if(transactionCampaignsData[i].imgpath !== '') {\n          const imgpath = transactionCampaignsData[i].imgpath;\n          let imgurl = '';\n          if(typeof(imgpath) === 'object') {\n            imgurl = await firebase.storage().ref().child(imgpath[0]).getDownloadURL();\n          } else {\n            imgurl = await firebase.storage().ref().child(imgpath).getDownloadURL();\n          }\n          transactionCampaignsData[i].imgurl = imgurl;\n          campaignImgArray.push(transactionCampaignsData[i]);\n        } else {\n          campaignImgArray.push(transactionCampaignsData[i]);\n        }\n      }\n      console.log(campaignImgArray)\n      return campaignImgArray;\n    }\n\n    const campaignSort = (campaignImgArray) => {\n      campaignImgArray.sort((to, from) => {\n        if(to.date > from.date) return -1;\n        if(to.date < from.date) return 1;\n        return 0;\n      })\n      this.logs = campaignImgArray;\n    }\n\n    const allFunction = async () => {\n      const docs = await getCampaign()\n      const transactionCastsDataArray = await getTransactionCast(docs)\n      const transactionCampaignsId = await getTransactionCampaignId(transactionCastsDataArray)\n      const transactionCampaignsData = await getTransactionCampaignData(transactionCampaignsId)\n      const campaignImgArray = await dataPush(transactionCampaignsData)\n      await campaignSort(campaignImgArray)\n    }\n\n    allFunction()\n  },\n  methods: {\n    titleLimit(text) {\n      let screenWidth = window.screen.width;\n      let maxLength = 18;\n      if(screenWidth >= 1025 && screenWidth <= 1299) {\n        maxLength = 10;\n      } else if(screenWidth >= 1300) {\n        maxLength = 13;     \n      }\n      if(text.length > maxLength) {\n        return text.substr(0, maxLength) + '...';\n      }\n      return text;\n    },\n    descreptionLimit(text) {\n      let screenWidth = window.screen.width;\n      let maxLength = 35;\n      if(screenWidth >= 1025 && screenWidth <= 1299) {\n        maxLength = 12;\n      } else if(screenWidth >= 1300) {\n        maxLength = 18;     \n      }\n      if(text.length > maxLength) {\n        return text.substr(0, maxLength) + '...';\n      }\n      return text;\n    },\n    logsSort() {\n      this.logs.sort((to, from) => {\n        if(to.campaignid > from.campaignid) return -1;\n        if(to.campaignid < from.campaignid) return 1;\n        return 0;\n      })\n    }\n  }\n}\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Contact.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Contact.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Contact.vue?vue&type=template&id=00b5f069&\"\nimport script from \"./Contact.vue?vue&type=script&lang=js&\"\nexport * from \"./Contact.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}